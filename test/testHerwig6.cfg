process Gen = {
	source = LHESource {
		untracked vstring fileNames = {
			"file:ttbar.lhe"
		}
	}

	untracked PSet maxEvents = { untracked int32 input = 100 }

	untracked PSet configurationMetadata = {
		untracked string version = "alpha"
		untracked string name = "LHEF input"
		untracked string annotation = "ttbar"
	}

	service = RandomNumberGeneratorService  {
		PSet moduleSeeds = {
			untracked uint32 generator = 123456789
			untracked uint32 VtxSmeared = 98765432
		}
	}

	include "FWCore/MessageService/data/MessageLogger.cfi"
	replace MessageLogger.cerr.threshold = "INFO"

	module generator = LHEProducer {
		untracked uint32 eventsToPrint = 1

		PSet hadronisation = {
			string generator = "Herwig6"

			untracked int32	herwigVerbosity = 2
			untracked int32	maxEventsToPrint = 1
			#untracked bool builtinPDFs = false

			vstring parameterSets = {
				"herwigCMSDefaults",
				"herwigAlpgen"
			}

			vstring herwigCMSDefaults = {
				'PTJIM     = 2.5',
				'JMRAD(73) = 0.57'
			}

			vstring herwigAlpgen = {
				#'MODPDF(1) = 19070',
				#'MODPDF(2) = 19070',
				'RMASS(4)  = 1.5',
				'RMASS(5)  = 4.7',
				'RMASS(6)  = 175'
			}
		}
	}

	module filter = LHEFilter { InputTag src = generator }

	include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"
	include "Configuration/StandardSequences/data/Generator.cff"

	replace VtxSmeared.src = generator
	replace genEventWeight.src = generator
	replace genEventScale.src = generator
	replace genEventPdfInfo.src = generator
	replace genParticles.src = generator
	replace genParticleCandidates.src = generator

	replace genParticles.abortOnUnknownPDGCode = false

	include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

	path p0 = { generator, filter, pgen }

	include "Configuration/EventContent/data/EventContent.cff"

	module printList = ParticleListDrawer {
		InputTag src = genParticles
		untracked int32 maxEventsToPrint = -1
	}

	module printTree = ParticleTreeDrawer {
		InputTag src = genParticles
		untracked bool printP4 = false
		untracked bool printPtEtaPhi = false
		untracked bool printVertex = true
		untracked bool printStatus = false
		untracked bool printIndex = false
		untracked vint32 status = { 1, 2, 3 }
	}

	path p = {
		printTree,
		printList
	}

	module GEN = PoolOutputModule { 
		using FEVTSIMEventContent
		untracked string fileName = "test.root"
		untracked PSet SelectEvents = {
			vstring SelectEvents = { "p0" }
		}
		untracked PSet dataset = {
			untracked string dataTier = "GEN"
		}
	}

	endpath outpath = { GEN }

	schedule = { p0, outpath }
}
